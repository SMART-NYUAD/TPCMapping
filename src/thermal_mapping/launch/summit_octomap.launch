<?xml version="1.0"?>
<launch>
    <arg name="launch_rviz" default="true"/>
    <arg name="file_rviz" default="lcf"/>

    <include file="$(find ouster_ros)/launch/sensor.launch">
        <arg name="viz" value="false"/>
        <arg name="ouster_ns" value="robot/ouster"/>
        <arg name="sensor_hostname" value="os-122138000087.local"/>
        <arg name="lidar_mode" value="1024x10"/>
    </include>

    <include file="$(find ptu_control)/launch/camera.launch"/>

    <!-- LiDAR Camera Fusion -->
    <remap from="/camera/color/image_raw" to="/camera/image_raw"/>
    <remap from="/velodyne_points" to="/robot/ouster/points"/>
    <param name="maxlen"          type="double" value="10.0" />    
    <param name="minlen"          type="double" value="0.0" />    
    <param name="max_ang_FOV"     type="double" value="2.7" />
    <param name="min_ang_FOV"     type="double" value="0.5" />
    <param name="pcTopic"         type="str"    value="/robot/ouster/points" />
    <param name="imgTopic"        type="str"    value="/camera/image_raw" />
    
    <param name="x_resolution"    type="double" value="0.25" />
    <param name="y_interpolation" type="double" value="10.0" />
    <param name="ang_Y_resolution"    type="double" value="2.05" />

    <group ns="matrix_file">
        <rosparam file="$(find thermal_mapping)/cfg/cfg_params.yaml" />
    </group>

    <node pkg="lidar_camera_fusion" type="lidar_camera_node" name="lidar_camera_node" launch-prefix="xterm -e" output="screen"/>

    <node if="$(arg launch_rviz)" name="rviz" pkg="rviz" type="rviz" required="true" args="-d $(find thermal_mapping)/rviz/$(arg file_rviz).rviz" output="log"/>
</launch>